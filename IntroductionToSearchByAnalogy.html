<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Dosis:700|Open+Sans:400,700" rel="stylesheet">
    <title>Intro to Search by Analogy</title>

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Introduction to Search by Analogy (with Videogames)" />
    <meta property="og:description" content="An interactive explanation of the concept of search by analogy, with an emphasis on searching for moments within video games." />
    <meta property="og:url" content="http://barrettrees.com/search_by_analogy_interactive/IntroductionToSearchByAnalogy.html" />
    <meta property="og:image" content="http://barrettrees.com/search_by_analogy_interactive/images/explainer/analogy.png" />

  </head>
  <body>
    <div class="explainer">
      <h1 id="title" class="textCenter">Introduction to Search by Analogy (with Videogames)</h1>
      <h4 class="authors textCenter">
        by <a href=https://barrettrees.com/>Barrett Anderson</a>, <a href=https://klimbin.github.io/>Kevin Lim</a>, and <a href=https://adamsmith.as/>Adam Smith</a>
        </br>
        May 2019
      </h4>
      <div class="textCenter">
        <img class="diagram centerImage" src="./images/explainer/analogy.png" alt="analogy">
        <p><b>Imagine the moment that fills in the bottom right blank.</b></p>
      </div>
      <p>
        The primary difference between the top two moments was that Mario was on foot (left) or riding Yoshi (right). The difference between the two moments on the left was that Mario was outdoors with a goomba (top), or indoors with Bowser (bottom). You were probably able to solve the analogy above, by imagining something like this to fill in the blank:
      </p>
      <img class="diagram centerImage" src="./images/explainer/resultMoment.png" alt="resultMoment">
      <p>
        In this analogical solution, Mario is indoors with Bowser (as on the bottom), and riding Yoshi instead of on foot (as on the right). If you’re a Mario fan you probably also noticed that these images aren’t from a real Mario game, but I bet that did not make it any harder for you to solve the analogy.
      </p>
      <p>
        This kind of analogical reasoning is easy for humans to do, but hard for them to explain, and it is not obvious that a machine can do it at all. Below, we show how a computer can be trained to understand this analogy, and provide a few interactive examples.
      </p>

      <div class="impact-box">
        <h2 class="textCenter">Why Search by Analogy (with Videogames) Matters</h2>
        <p>
          Media, including videogames, is an important part of our lives, and thinking about <a href=https://becausegamesmatter.com/>media</a> <a href=https://feministfrequency.com/>critically</a> is important. Search by analogy is a tool for game scholars and critics that will make new kinds of analysis possible.
        </p>
        <p>
         Often when you conduct a web search or when you use a keyboard with predictive text, you are benefiting from the same underlying technology (<a href=https://jalammar.github.io/illustrated-word2vec/>word embeddings</a>) that makes search by analogy possible. Videogame moments are a new place to experiment with these ideas, and what we learn in these experiments might have applications in other domains (e.g. text, music, images, video, etc.).
        </p>
      </div>

      <!-- new section -->
      <h2>Parameterizing Videogame Moments</h2>
      <p>
        To a human player, each moment in a game has many features, but those features can also be broken down into numbers. In a Mario game this could include things like the number of coins collected, the number of enemies on the screen, the number of lives remaining, score, and so on:
      </p>
      <img class="diagram centerImage" src="./images/explainer/features.png" alt="features">
      <p>
        These are all the sort of things that we might pick out as features for a Mario game, but from now on let’s treat each of these as something a little more abstract (Feature X, Feature Y, etc.). The rest of this explanation works even if we have no idea what any of the individual features mean (e.g., if they are for an unfamiliar game, or if they were generated by machine learning). If we look at a graph of gameplay over time, we can see how each moment is a combination of these features:
      </p>
      <img class="diagram centerImage" src="./images/explainer/powerups.png" alt="powerups">
      <p>
        We can assign a numeric value to each feature and create a vector (list) of numbers to represent any specific videogame moment. Now each individual moment is just a long list of numbers:
      </p>
      <img class="diagram centerImage" src="./images/explainer/vectorRepresentation.png" alt="vectorRepresentation">
      <p class="caption textCenter">
        Credit to <a href="https://www.kdnuggets.com/2016/05/amazing-power-word-vectors.html">Adrian Colyer</a> for inspiring this illustration.
      </p>

      <!-- new section -->
      <h2>Videogame Moment Search by Analogy</h2>
      <p>
        So, why did we bother turning each moment in the game into a list of numbers? In short, because now we can do interesting things to these moments (with math). This is the first step in teaching a computer to understand an analogy, like the example at the top of this page. In reality our vectors will contain values for many features, but it will be easier to illustrate the rest of this explanation if we pretend that they only have two. In that case, our <i><b>videogame moment vectors</b></i> might look something like this:
      </p>

      <img class="diagram centerImage" src="./images/explainer/vectorAB.png" alt="vectorAB">

      <p>
        We can imagine a graph with Feature X (on the x-axis) and Feature Y (on the y-axis). If the game had only these two features, every possible moment would exist somewhere on this 2D graph. This is a representation of the abstract space of all of possible game states. (This is also why we had to simplify - if every feature in our vector added another dimension to this graph it would very quickly become impossible to draw it on the page.) So, sticking to this simplified version, we can put Moment A and Moment B vectors from the example at the top of the page on this graph.
      </p>
      <p>
        Here’s the first part of how the search-by-anlogy trick works:
      </p>
      <p>
        We can take the difference between the Moment A vector and the Moment B vector to get a new vector (B-A) that removes what they have in common (Mario outdoors), but leaves intact what is distinct between them (on foot vs on Yoshi). The result of this operation (B-A) is a <i><b>difference vector</b></i> that, in this case, we think represents something like the <i>Yoshiness</i> of that moment.
      </p>

      <img class="diagram centerImage" src="./images/explainer/vectorDifference.png" alt="vectorDifference">

      <p>
        Here’s the second part of the search-by-analogy trick:
      </p>
      <p>
        Now that we have a <i><b>difference vector</b></i> representing something like <i>Yoshiness</i> (B-A), we can add it to a moment that has no Yoshi in it (Moment C, from our example above), and hopefully find an equivalent moment with one crucial difference (the solution of to the analogy above, Moment C + Yoshi).
      </p>

      <img class="diagram centerImage" src="./images/explainer/newVector.png" alt="newVector">

      <p>
        That is the essence of videogame moment search-by-analogy, but there is one final important wrinkle, which is the part that makes this search. Although we can imagine a graph that contains all possible moments in a game, for most games we are only ever going to be working with a small sample of those moments. What if the moment we are looking for doesn’t exist in that sample? What if the moment that we are looking for isn’t even possible?
      </p>

      <p>
        In this case, we still add the difference vector (B-A)  to another (Moment C), but instead of giving us the answer this creates a <i><b>query vector</b></i>.
      </p>

      <img class="diagram centerImage" src="./images/explainer/queryVector.png" alt="queryVector">

      <p>
        Now that we have a <i><b>query vector</b></i> we can compare it to all of the moments that exist in our sample (represented as dots on the graph below). The single closest moment is our analogy search result, Moment D.
      </p>

      <img class="diagram centerImage" src="./images/explainer/queryComparison.png" alt="queryComparison">

      <p>
        That is all there is to search-by-analogy.
      </p>

      <p>
        There is one more trick we can do that will make our graph more useful. Right now the axes are not very meaningful, but we can change that by rotating and transforming the graph. One way we can do this makes resemblance to the Moment C vector vertical (as measured by <a href=https://en.wikipedia.org/wiki/Cosine_similarity/>cosine similarity</a>), and resemblance to the B-A <i><b>difference vector</b></i> horizontal. This gives us a y-axis that tells us how similar each moment is to Moment C, and x-axis that tells us how much of the B-A distinction that we defined (e.g., <i>Yoshiness</i>) each moment has. We can also include how similar each moment is to the <i><b>query vector</i></b>, encoded in the size and color of each dot.
      </p>

      <img class="diagram centerImage" src="./images/explainer/bestMatches.png" alt="bestMatches">

      <p>
        The interactive below contains examples of a search-by-analogy success for a couple of games. All of the moments used came from a human playthrough of each game (Super Mario World and Super Metroid). The graph shows, for every moment in the sample, its similarity to the <i><b>difference vector</i></b> (B-A, on the x-axis), its similarity to Moment C (on the y-axis) and how close it is to the <i><b>query vector</i></b> (dot size and color). You can scroll around the graph and mouse over any moment for more detail. You can also make your own queries (changing Moments A, B, and C) and see what happens:
      </p>
        <div class="impact-box">
        <h2 class="textCenter">What's New About Search by Analogy (with Videogames)</h2>
        <p>
        This is a combination of two old ideas, applied to a new domain. The first concept is that it is possible to represent many different kinds of things as vectors in an abstract space. <a href=https://vusd.github.io/spacesheet/>Words, faces, and many other things</a> can all be turned into vectors embdeded in an appropriate space.
        </p>
        <p>
        The second important concept is that the relationships between these vectors can be meaningful. The most famous result here is <a href=https://www.technologyreview.com/s/541356/king-man-woman-queen-the-marvelous-mathematics-of-computational-linguistics/>"King - Man + Woman = Queen"</a>, where a mathematical relationship between word vectors captures an analogical relationship between words.
        </p>
        <p>
        Before now, these ideas had not been applied to moments in a videogame. Only recently has the work been done to create an <a href=https://adamsmith.as/papers/KEG-18_paper_4.pdf>abstract space for embedding videogame moments</a>, and possible applications are <a href=https://adamsmith.as/papers/crawling-indexing-retrieving.pdf>still being explored</a>.
        </p>
      </div>

    </div>

    <div class="interactive">
      <div class="about">
        <h1>Search by Analogy in Super Mario World and Super Metroid</h1>
        <p>Each moment is specified with a frame number. You can use the dropdown and buttons to see our examples, or change the frame numbers yourself to explore other relationships between moments.</p>
      </div>
      <div class="wrapper">
        <div class="frames-container">
          <div class="gallery">
            <img class="moment" id="imageA">
            <div class="moment-text">
              <label for="pointA">Moment A:</label>
              <input class="frame-num" type="text" id="pointA" name="pointA">
            </div>
            <input class="pointRangeSlider" type="range" min="1" class="slider" id="myRangeA">
          </div>
          <div class="gallery">
            <img class="moment" id="imageB">
            <div class="moment-text">
              <label for="pointB">Moment B:</label>
              <input class="frame-num" type="text" id="pointB" name="pointB">
            </div>
            <input class="pointRangeSlider"  type="range" min="1" class="slider" id="myRangeB">
          </div>
          <div class="gallery">
            <img class="moment" id="imageC">
            <div class="moment-text">
              <label for="pointC">Moment C:</label>
              <input class="frame-num" type="text" id="pointC" name="pointC">
            </div>
            <input class="pointRangeSlider"  type="range" min="1" class="slider" id="myRangeC">
          </div>
          <div class="gallery result">
            <img class="moment" id="imageD">
            <div class="result-text">
              <div class="moment-text">
                <p>Moment D: <span id="pointD"></span></p>
              </div>
            </div>
          </div>
        </div>

        <div class="graph-container">
          <div class="description">
            <i id="exampleTitle"></i>
            <p id="exampleDesc"><p>
          </div>
          <div class="buttons">
            <select id="gameListButton">
              <option value="mario">Mario</option>
              <option value="metroid">Metroid</option>
              <option value="mario3">Mario (larger dataset)</option>
            </select>
            <button id="exampleButton">Example 1</button>
            <button id="exampleButton2">Example 2</button>
            <button id="searchButton">Reset Graph</button>
          </div>

          <div id="scatter"></div>
        </div>
      </div>
    </div>

    <script src="js/d3.v3.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.js"></script>
    <script src="js/vectorFunctions.js"></script>
    <script src="js/graph.js"></script>
  </body>
</html>
